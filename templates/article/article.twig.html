{% extends "base-admin.twig.html" %} {% block content %}
<div class="container py-5">
  <!-- Titre de la section -->
  <h1 class="mb-4 text-center text-primary">Détails de l'article</h1>

  <!-- Carte contenant l'article -->
  <div class="card shadow-sm">
    <div class="row g-0">
      <!-- Affichage de l'image de l'article -->
      {% if article.image %}
      <div class="col-md-4">
        <img
          src="upload/{{ article.image }}"
          alt="Image de l'article"
          class="img-fluid rounded-start"
        />
      </div>
      {% endif %}

      <!-- Contenu de l'article -->
      <div class="col-md-8">
        <div class="card-body">
          <h2 class="card-title">{{ article.titre }}</h2>
          <p class="card-text">
            <strong>Chapô :</strong> {{ article.chapo|raw }}
          </p>
          <p class="card-text">
            <strong>Auteur :</strong> {{ article.auteur|raw }}
          </p>
        </div>
        <div class="card-footer d-flex justify-content-between">
          <a
            href="admin.php?page=article&action=modifier&id={{ article.id_article }}"
            class="btn btn-warning"
          >
            <i class="fa-solid fa-pencil"></i> Modifier
          </a>
          <a
            href="admin.php?page=article&action=delete&id={{ article.id_article }}"
            class="btn btn-danger"
          >
            <i class="fa-solid fa-trash"></i> Supprimer
          </a>
          <a
            href="admin.php?page=article&action=read"
            class="btn btn-secondary"
          >
            <i class="fa-solid fa-arrow-left"></i> Retour à la liste
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Blocs associés -->
  <!-- Carte pour ajouter un nouvel article -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card bg-light h-100">
        <div class="card-body text-center">
          <h3 class="card-title">Ajouter un bloc</h3>
          <p class="card-text">
            Cliquez sur le bouton ci-dessous pour choisir un type de bloc dans
            ce chapitre
          </p>
          <a
            href="admin.php?page=choix&id_article={{ article.id_article }}"
            class="btn btn-success"
          >
            <i class="fa-solid fa-plus"></i> Choisir un bloc
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-5">
    <h3 class="text-primary mb-3">Contenu associé</h3>
    {% for bloc in listebloc %}
    <div class="d-flex justify-content-between align-items-center mb-3">
      <!-- Affichage des blocs selon le type -->
      <div>
        {% if bloc.type == "h1" %}
        <h1>{{ bloc.texte | raw }}</h1>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h1&id_bloc={{ bloc.id }}"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "h2" %}
        <h2>{{ bloc.texte | raw }}</h2>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "h3" %}
        <h3>{{ bloc.texte | raw }}</h3>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "h4" %}
        <h4>{{ bloc.texte | raw }}</h4>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "h5" %}
        <h5>{{ bloc.texte | raw }}</h5>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "p" %}
        <p class="{{ bloc.style }}">{{ bloc.texte | raw }}</p>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "image" %}
        <img
          src="upload/{{ bloc.image }}"
          alt="{{ bloc.alt }}"
          class="img-fluid mb-3"
        />
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "citation" %}
        <blockquote>{{ bloc.texte_citation | raw }}</blockquote>
        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% elseif bloc.type == "citation_texte" %}
        <blockquote>{{ bloc.texte_citation | raw }}</blockquote>
        <p>{{bloc.texte | raw }}</p>

        <div class="btn-group">
          <a
            href="admin.php?page=bloc&action=modifier&id=h2"
            class="btn btn-outline-warning btn-sm"
            title="Modifier"
          >
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a
            href="admin.php?page=bloc&action=delete&id={{ bloc.id }}"
            class="btn btn-outline-danger btn-sm"
            title="Supprimer"
          >
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>

        {% elseif bloc.type == "audio" %}
        <div class="container  mb-5 {{ bloc.type }}">
          <div class="podcast">
            <h3 class="podcast__episode_title">{{ bloc.texte_titre }}</h3>
            <h5 class="podcast__title">
              {{ bloc.texte_legende }}
              <i>Episode 152</i>
            </h5>

            <div class="podcast__meta">
              <audio controls width="100px">
                <source src="upload/{{ bloc.audio }}">
                Your browser does not support the audio tag.
              </audio>

              <div class="artwork mb-2">
                <img src="upload/{{ bloc.image }}" alt="{{ bloc.alt }}" style="width: 200px; height: 200px;">
              </div>

            </div>
          </div>
        </div>



        {% else %}

        <p>Type de bloc inconnu : {{ bloc.type }}</p>
        {% endif %}
      </div>

      <!-- Boutons Modifier et Supprimer -->
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
